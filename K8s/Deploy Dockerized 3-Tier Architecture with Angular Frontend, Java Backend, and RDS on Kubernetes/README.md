# Deploy Dockerized 3-Tier Architecture with Angular Frontend, Java Backend, and RDS on Kubernetes

This project outlines the steps to deploy a 3-tier architecture consisting of an Angular frontend, Java backend, and MariaDB (hosted on Amazon RDS) using Kubernetes. The infrastructure is set up to run as Dockerized containers orchestrated by Kubernetes, with backend communication facilitated via a NodePort service.
<br><br>

---
**Prerequisites**

    Kubernetes Components: Ensure Kubeadm, Kubelet, Kubectl, and Docker are installed on both the master and worker nodes.
    Cluster Initialization:
        Initialize the cluster on the master node using kubeadm init.
        Join the worker nodes using the token generated by kubeadm join.

    For Kubeadm installation and configuration, refer to this link 
  https://github.com/Gaurav1251/Devops_Tasks/tree/main/K8s/Kubeadm%20Installation%20and%20Configuration


  <br><br>

  ---
**Steps**
1. Install MariaDB Server (Master Node)

    Update the system and install MariaDB:

       sudo apt update
       sudo apt install mariadb-server
       sudo systemctl start mariadb
       sudo systemctl enable mariadb

2. Create RDS Database

    Create an RDS instance with the MariaDB engine.
    Connect to the RDS instance:

       mysql -h rds-endpoint -u admin -p

    Create the springbackend database and load springbackend.sql:

       mysql -h rds-endpoint -u admin -p springbackend < springbackend.sql

3. Configure Application Properties

       Create application.properties for the backend to connect to the RDS database, including RDS endpoint, username, and password.

4. Deploy Backend and Frontend Pods

        Create Kubernetes deployment and service files for both backend and frontend services.
        Ensure the backend is exposed on port 8085 (matching the backend image).
        Use a NodePort service for both backend and frontend, ensuring external access.

5. Apply Deployment Files

    Apply the deployment and service files for both frontend and backend:

       kubectl apply -f .

    Verify that the pods and services are running:
 
       kubectl get pods && kubectl get svc

6. Update Configuration Files in Pods

    Update worker.service.ts with the public IP of the worker node and NodePort.
    Copy application.properties to the backend pod and worker.service.ts to the frontend pod:

        kubectl cp /path/application.properties backend-pod_name:/path/
        kubectl cp /path/worker.service.ts frontend-pod_name:/path/

8. Expose Frontend via NodePort

    Allow external access by configuring the security group to open ports in the range 30000-32767.
    Access the frontend using the public IP and NodePort in the browser:

       http://public_ip_of_worker-node:port/


---

**Conclusion**

This deployment guide demonstrates the integration of a 3-tier architecture with Kubernetes, utilizing Docker containers for the Angular frontend, Java backend, and a MariaDB RDS. By using Kubernetes services and NodePort, the application is accessible externally, promoting scalability and isolation of services. The setup highlights essential Kubernetes skills, including pod management, service exposure, and secure configuration of database access.
